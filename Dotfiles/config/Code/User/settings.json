// vim: ft=jsonc
{
   "workbench.hover.delay": 100,
   "extensions.ignoreRecommendations": true,
   "telemetry.telemetryLevel": "error",

   "settingsSync.ignoredSettings": [],
   "settingsSync.ignoredExtensions": ["ms-vscode.mono-debug", "icrawl.discord-vscode"],

   // Basics
   // ======
   "editor.tabSize": 3,
   "editor.wrappingIndent": "deepIndent",
   "editor.wordWrapColumn": 120,
   "editor.rulers": [90, 70, 80, 100],
   "editor.copyWithSyntaxHighlighting": false,
   "editor.find.globalFindClipboard": true,
   "editor.suggest.shareSuggestSelections": true,

   "workbench.startupEditor": "welcomePageInEmptyWorkbench",
   "window.titleBarStyle": "native",
   "window.nativeTabs": true,
   "editor.renderLineHighlight": "all",
   "breadcrumbs.enabled": true,

   "window.closeWhenEmpty": true,
   "window.newWindowDimensions": "inherit",
   "window.openWithoutArgumentsInNewWindow": "on",

   // "workbench.editor.closeOnFileDelete": true,
   "workbench.editor.untitled.hint": "hidden",

   "files.autoSave": "onFocusChange",
   "files.insertFinalNewline": true,
   "files.trimFinalNewlines": true,

   // @sync os=mac
   "editor.fontFamily": "'Fantasque Sans Mono', monospace",
   // @sync os=windows
   // "editor.fontFamily": "'Iosevka'",
   "editor.codeLensFontFamily": "'Iosevka Nerd Font', monospace",
   "terminal.integrated.fontFamily": "Fantasque Sans Mono",

   "workbench.fontAliasing": "auto",
   "explorer.decorations.colors": false,
   "editor.fontLigatures": true,
   "editor.fontSize": 14,
   "editor.cursorStyle": "underline-thin",
   "terminal.integrated.cursorBlinking": true,

   // Vim keybindings
   // ===============
   "vim.normalModeKeyBindingsNonRecursive": [
      {
         // Trigger "Setting Toggle" extension to enable/disable ligatures
         "before": ["<leader>", "l"],
         "commands": ["extension.toggle_s1"]
      },

      {
         "before": ["g", "q", "q"],
         "commands": ["rewrap.rewrapComment"]
      },

      {
         "before": ["<leader>", "r"],
         "commands": ["editor.action.rename"]
      },

      // ### Git-related maps
      {
         "before": ["]", "h"],
         "commands": ["workbench.action.editor.nextChange"]
      },
      {
         "before": ["[", "h"],
         "commands": ["workbench.action.editor.previousChange"]
      },
      {
         "before": ["g", "h"],
         "commands": ["editor.action.dirtydiff.next"]
      },
      {
         "before": ["g", "H"],
         "commands": ["editor.action.dirtydiff.previous"]
      },
      {
         "before": ["<leader>", "h", "s"],
         "commands": ["git.stageSelectedRanges"]
      },

      // ### Terminal-mappings
      // (See also: keybinds.json)
   ],
   "terminal.integrated.commandsToSkipShell": [
      "workbench.action.focusRightGroup",
      "workbench.action.focusLeftGroup",
      "workbench.action.focusAboveGroup",
      "workbench.action.focusBelowGroup",
   ],

   // Other vim
   // ==========
   "vim.easymotion": true,
   "vim.incsearch": true,
   "vim.useSystemClipboard": true,
   "vim.useCtrlKeys": true,
   "vim.hlsearch": true,
   "vim.leader": "<space>",
   "vim.handleKeys": {
      "<C-f>": false
   },

   // Navigation & search
   // ===================
   "explorer.sortOrder": "mixed",
   "search.smartCase": true,
   "search.useGlobalIgnoreFiles": true,

   // Specific languages and features
   // ===============================
   // ### Filetypes and file-specific settings
   "files.associations": {
      "dune-project": "dune",
      "*.locked": "ocaml.opam",
      "vimrc": "viml"
   },

   "files.watcherExclude": {
      // OCaml
      "**/_build/**": true,
      "**/_opam/**": true,
      "**/esy.lock/**": true,
      "**/_esy/**": true,
      "**/lib/bs/**": true,
      "**/lib/js/**": true,
      "**/lib/ocaml/**": true,
      "**/*.bs.js": true,

      // Rust
      "**/rust/target/**": true
   },

   // ### Diffs
   "diffEditor.renderIndicators": false,

   // ### Settings-editor
   "workbench.settings.useSplitJSON": true,

   // ### Terminal & debugger
   "debug.inlineValues": "on",
   "terminal.integrated.confirmOnExit": "hasChildProcesses",

   // ### Git
   "git.alwaysShowStagedChangesResourceGroup": true,
   "git.autofetch": true,
   "git.enableCommitSigning": true,
   "git.postCommitCommand": "push",
   "gitlens.blame.ignoreWhitespace": true,
   "gitlens.codeLens.authors.command": "gitlens.showQuickCommitDetails",
   "gitlens.currentLine.scrollable": false,
   "gitlens.hovers.annotations.over": "annotation",
   "gitlens.mode.statusBar.enabled": false,
   "gitlens.advanced.messages": {
      "suppressLineUncommittedWarning": true
   },

   // ### Auto-formatting
   "formattingToggle.activateFor": ["formatOnPaste", "formatOnSave", "formatOnType"],
   "editor.formatOnPaste": true,
   "editor.formatOnType": true,

   // ### Prettier
   "prettier.printWidth": 90,
   "prettier.tabWidth": 3,
   "prettier.singleQuote": true,
   "prettier.trailingComma": "all",
   "prettier.bracketSpacing": true,
   "prettier.semi": false,
   "prettier.ignorePath": ".prettierignore",
   "[json]": {
      "editor.defaultFormatter": "esbenp.prettier-vscode"
   },
   "[javascript]": {
      "editor.defaultFormatter": "esbenp.prettier-vscode"
   },

   // ### ESLint
   "eslint.lintTask.enable": true,

   // ### Rewrap (comment-wrapping)
   "rewrap.autoWrap.enabled": false,
   "rewrap.wholeComment": false,

   // Using Vim mappings, above.
   "gitlens.keymap": "none",

   // Mimic Vim's trailing-whitespace behaviour
   "emptyIndent.removeIndent": true,
   "emptyIndent.highlightIndent": true,

   // Indent rainbow
   "indentRainbow.ignoreErrorLanguages": ["ocaml", "ocaml.interface", "dune"],

   // ### Setting Toggle
   "toggle.setting1Title": "editor.fontLigatures",
   "toggle.iconEnabled": false,

   // ### HTML
   "html.format.endWithNewline": true,
   "html.format.maxPreserveNewLines": 2,
   "html.format.wrapLineLength": 100,

   // ### ReasonML
   "reason.diagnostics.tools": ["merlin", "bsb"],
   "reason.codelens.enabled": true,
   "reason.format.width": 90,

   // ### C#, ASP.NET, etc
   "omnisharp.useGlobalMono": "always",
   "omnisharp.loggingLevel": "debug",
   "razor.languageServer.debug": true,

   // Other extensions and non-language-specific features
   // ==================================================
   // ### Leetcode
   "leetcode.hint.configWebviewMarkdown": false,
   "leetcode.showDescription": "Both",
   "leetcode.defaultLanguage": "javascript",
   "leetcode.enableStatusBar": false,
   "leetcode.hint.commentDescription": false,
   "leetcode.hint.setDefaultLanguage": false,
   "leetcode.hint.commandShortcut": false,
   "leetcode.hideSolved": true,

   // ### TabNine
   "tabnine.experimentalAutoImports": true,
   "tabnine.receiveBetaChannelUpdates": true,

   // ### Live Share
   "liveshare.guestApprovalRequired": true,
   "liveshare.allowGuestDebugControl": true,
   "liveshare.allowGuestTaskControl": true,
   "liveshare.focusBehavior": "prompt",
   "liveshare.joinDebugSessionOption": "Prompt",
   "liveshare.languages.allowGuestCommandControl": true,
   "liveshare.launcherClient": "visualStudioCode",
   "liveshare.notebooks.allowGuestExecuteCells": true,
   "liveshare.presence": true,
   "liveshare.publishWorkspaceInfo": true,
   "liveshare.showInStatusBar": "whileCollaborating",

   // ### Finally, don't commit changes below this line:

   // ... and anything after this, was added programmatically!
}
